---
apiVersion: v1
kind: ConfigMap
metadata:
  name: configmap-dashboards
data:
  traces-et-metriques-red.json: |-
    {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 1,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 57,
              "gradientMode": "hue",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 7,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Latency charts",
                "url": "http://localhost:3000/explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"topk(10, sum by (http_method,http_target)(increase(traces_spanmetrics_duration_seconds_sum{http_method!=\\\"\\\", http_target!=\\\"\\\"}[1m]) / increase(traces_spanmetrics_duration_seconds_count{http_method!=\\\"\\\", http_target!=\\\"\\\"}[1m])))\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"queryType\":\"nativeSearch\",\"search\":\"http.target=${__field.labels.http_target} http.method=${__field.labels.http_method}\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 9,
          "w": 16,
          "x": 0,
          "y": 0
        },
        "id": 11,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "exemplar": true,
            "expr": "sum by (service)(rate(traces_spanmetrics_latency_sum{service=~\".+\"}[1m]) / rate(traces_spanmetrics_latency_count{service=~\".+\"}[1m])) * 55",
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Request Rate",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 5
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 8,
          "x": 16,
          "y": 0
        },
        "id": 13,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "exemplar": true,
            "expr": "(sum(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\"}[1m]))/sum(increase(traces_spanmetrics_calls_total[1m]))) * 100",
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Overall Error %age",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Error traces for ${__field.labels.service}",
                "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"serviceName\" : \"${__field.labels.service}﻿\",\"search\":\"error=true\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 4
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 8,
          "x": 16,
          "y": 4
        },
        "id": 10,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "exemplar": true,
            "expr": "(sum by (service)(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",service=~\".*\"}[1m])))/(sum by (service)(increase(traces_spanmetrics_calls_total{status_code!=\"\",service!=\".*\"}[1m]))) * 100",
            "interval": "",
            "legendFormat": "{{http_target}}",
            "refId": "A"
          }
        ],
        "title": "Error Percentages by Service",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "filterable": false,
              "inspect": false
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Traces for service ${__data.fields.service} ",
                "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"serviceName\" : \"${__data.fields.service}\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 65
                }
              ]
            },
            "unit": "s"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Value #A"
              },
              "properties": [
                {
                  "id": "custom.displayMode",
                  "value": "lcd-gauge"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 11,
          "w": 11,
          "x": 0,
          "y": 9
        },
        "id": 2,
        "links": [],
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "frameIndex": 0,
          "showHeader": true,
          "sortBy": [
            {
              "desc": true,
              "displayName": "Average Latency"
            }
          ]
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "exemplar": false,
            "expr": "topk(10, sum by (service)(increase(traces_spanmetrics_latency_sum{service=~\".+\"}[1m]) / increase(traces_spanmetrics_latency_count{service=~\".+\"}[1m])))",
            "format": "table",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Top 10 Highest Service Latencies Over Last Minute",
        "transformations": [
          {
            "id": "filterFieldsByName",
            "options": {
              "include": {
                "names": [
                  "Value",
                  "service"
                ]
              }
            }
          },
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "Value": false,
                "service": false
              },
              "indexByName": {},
              "renameByName": {
                "Value": "Latency (ms)",
                "Value #A": "Average Latency",
                "http_method": "HTTP Method",
                "http_target": "Endpoint",
                "service": ""
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 23,
              "gradientMode": "hue",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 7,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Latency charts",
                "url": "http://localhost:3000/explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"topk(10, sum by (http_method,http_target)(increase(traces_spanmetrics_duration_seconds_sum{http_method!=\\\"\\\", http_target!=\\\"\\\"}[1m]) / increase(traces_spanmetrics_duration_seconds_count{http_method!=\\\"\\\", http_target!=\\\"\\\"}[1m])))\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"queryType\":\"nativeSearch\",\"search\":\"http.target=${__field.labels.http_target} http.method=${__field.labels.http_method}\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 11,
          "w": 13,
          "x": 11,
          "y": 9
        },
        "id": 4,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "exemplar": true,
            "expr": "sum by (service)(increase(traces_spanmetrics_latency_sum{service=~\".+\"}[10m]) / increase(traces_spanmetrics_latency_count{service=~\".+\"}[10m]))",
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "All Endpoint Latencies in ms (Last 10 mins)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "tempo",
          "uid": "tempo"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 20
        },
        "id": 6,
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "expr": "{job=\"agent\"} | logfmt | status=\"STATUS_CODE_ERROR\"",
            "queryType": "nativeSearch",
            "refId": "A",
            "search": "error=true"
          }
        ],
        "title": "Autologged Errors",
        "type": "table"
      }
    ],
    "refresh": "5s",
    "schemaVersion": 37,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": []
    },
    "time": {
      "from": "now-5m",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "OLD - Traces et Métriques RED",
    "uid": "5VSk5Lank",
    "version": 1,
    "weekStart": ""
    }
  dashboard_traces_metrics_rows.json: |-
    {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "description": "",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 8,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 29,
        "panels": [],
        "title": "Indicateurs génériques",
        "type": "row"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "fillOpacity": 90,
              "lineWidth": 0,
              "spanNulls": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 6,
          "x": 0,
          "y": 1
        },
        "id": 37,
        "options": {
          "alignValue": "left",
          "legend": {
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "mergeValues": true,
          "rowHeight": 0.5,
          "showValue": "never",
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "up{job=\"opentelemetry-collector\"}",
            "interval": "",
            "legendFormat": "{{job}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Statut du Collecteur",
        "type": "state-timeline"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "fillOpacity": 90,
              "lineWidth": 0,
              "spanNulls": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 6,
          "y": 1
        },
        "id": 38,
        "options": {
          "alignValue": "left",
          "legend": {
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "mergeValues": true,
          "rowHeight": 0.5,
          "showValue": "never",
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "up{job=\"tempo-collector\"}",
            "interval": "",
            "legendFormat": "{{job}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Statut de Tempo",
        "type": "state-timeline"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 11,
          "y": 1
        },
        "id": 40,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "tempo_discarded_spans_total{job=\"tempo-collector\"}",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Total des spans rejetés",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 1000000
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 14,
          "y": 1
        },
        "id": 43,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "tempo_metrics_generator_spans_received_total{}",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Tempo total des spans reçus",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 1000000
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 17,
          "y": 1
        },
        "id": 44,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "tempo_ingester_traces_created_total{}",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Tempo total des traces crées par l'ingester",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 21,
          "y": 1
        },
        "id": 42,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "tempo_warnings_total{instance=\"tempo:3100\"}",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "hide": false,
            "refId": "B"
          }
        ],
        "title": "Tempo total des Warnings",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "Transactions (traces)  par minute (Throughput)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "tpm",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "displayName": "tpm",
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 24,
          "x": 0,
          "y": 4
        },
        "id": 15,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (rate(traces_spanmetrics_calls_total{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m]))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "hide": false,
            "refId": "B"
          }
        ],
        "title": "Traces par minutes",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 10
        },
        "id": 17,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true,
            "width": 320
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "(sum by (span_name) (avg_over_time(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m]))*100)",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "hide": false,
            "refId": "B"
          }
        ],
        "title": "Temps passé par span (en %) par heure",
        "type": "timeseries"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 18
        },
        "id": 27,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 57,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 7,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "links": [
                  {
                    "targetBlank": true,
                    "title": "Details",
                    "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"sum by(service) (traces_spanmetrics_latency_bucket{service=\\\"${__field.labels.service}\\\"})\",\"editorMode\":\"code\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"queryType\":\"nativeSearch\",\"serviceName\":\"${__field.labels.service}\"}]"
                  }
                ],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 0,
              "y": 19
            },
            "id": 11,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "sum by (service)(rate(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m]) / rate(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m])) * 55",
                "interval": "",
                "legendFormat": "{{service_namespace}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Répartition par service",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 12,
              "y": 19
            },
            "id": 25,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg by (span_name)((traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"})/(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}))",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Latence par nom de span",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 23,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "smooth",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 7,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "links": [
                  {
                    "targetBlank": true,
                    "title": "Details",
                    "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"sum by(service) (traces_spanmetrics_latency_bucket{service=\\\"${__field.labels.service}\\\"})\",\"editorMode\":\"code\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"queryType\":\"nativeSearch\",\"serviceName\":\"${__field.labels.service}\"}]"
                  }
                ],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 0,
              "y": 28
            },
            "id": 4,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "sum by (service)(increase(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[10m]) / increase(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[10m]))",
                "interval": "",
                "legendFormat": "",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Latences de tous les \"Endpoints\" sur les 10 dernières minutes (en ms)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 12,
              "y": 28
            },
            "id": 23,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "avg by (span_kind)((traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"})/(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}))",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "hide": false,
                "refId": "B"
              }
            ],
            "title": "Latence par type de span",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "auto",
                  "displayMode": "auto",
                  "filterable": false,
                  "inspect": false
                },
                "links": [
                  {
                    "targetBlank": true,
                    "title": "Traces for service ${__data.fields.service} ",
                    "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"serviceName\" : \"${__data.fields.service}\"}]"
                  }
                ],
                "mappings": [
                  {
                    "options": {
                      "NaN": {
                        "color": "green",
                        "index": 0,
                        "text": "0 ms"
                      }
                    },
                    "type": "value"
                  }
                ],
                "noValue": "No value",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 65
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #A"
                  },
                  "properties": [
                    {
                      "id": "custom.displayMode",
                      "value": "lcd-gauge"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 35
            },
            "id": 2,
            "links": [],
            "options": {
              "footer": {
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "frameIndex": 0,
              "showHeader": true,
              "sortBy": [
                {
                  "desc": true,
                  "displayName": "Average Latency"
                }
              ]
            },
            "pluginVersion": "9.1.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "topk(10, sum by (service)(increase(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m]) / increase(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m])))",
                "format": "table",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Top 10 latences de service les plus élevées sur les 5 dernières minutes",
            "transformations": [
              {
                "id": "filterFieldsByName",
                "options": {
                  "include": {
                    "names": [
                      "Value",
                      "service"
                    ]
                  }
                }
              },
              {
                "id": "organize",
                "options": {
                  "excludeByName": {
                    "Value": false,
                    "service": false
                  },
                  "indexByName": {},
                  "renameByName": {
                    "Value": "Latency (ms)",
                    "Value #A": "Average Latency",
                    "http_method": "HTTP Method",
                    "http_target": "Endpoint",
                    "service": ""
                  }
                }
              }
            ],
            "type": "table"
          }
        ],
        "title": "Latences",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 19
        },
        "id": 31,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "#EAB839",
                      "value": 20
                    },
                    {
                      "color": "red",
                      "value": 50
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 9,
              "x": 0,
              "y": 20
            },
            "id": 13,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": false,
              "showThresholdMarkers": true
            },
            "pluginVersion": "9.1.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "(sum(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\",equipe_nom=~\"$equipe\"}[1m]))/sum(increase(traces_spanmetrics_calls_total{cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1m]))) * 100",
                "hide": true,
                "interval": "",
                "legendFormat": "Last minute",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "(sum(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))/sum(increase(traces_spanmetrics_calls_total{cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))*100)",
                "hide": false,
                "legendFormat": "Last hour",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "Pourcentage d'erreur global sur la dernière heure",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "taux d'erreur sur la dernière heure",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "links": [
                  {
                    "targetBlank": true,
                    "title": "Erreurs de trace pour ${__field.labels.span_name}﻿﻿﻿﻿﻿﻿﻿",
                    "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"spanName\":\"${__field.labels.span_name}﻿﻿﻿﻿﻿﻿﻿\",\"search\":\"error=true\"}],\"range\":{\"from\":\"now-1h\",\"to\":\"now\"}}"
                  }
                ],
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "#EAB839",
                      "value": 20
                    },
                    {
                      "color": "red",
                      "value": 50
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 14,
              "x": 9,
              "y": 20
            },
            "id": 10,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": false,
              "showThresholdMarkers": true
            },
            "pluginVersion": "9.1.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "(sum by (span_name)(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h])))/(sum by (span_name)(increase(traces_spanmetrics_calls_total{status_code!=\"\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))*100)",
                "interval": "",
                "legendFormat": "{{span_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Pourcentage d'erreur par \"span\" sur la dernière heure",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "description": "taux d'erreur sur la dernière heure",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "links": [
                  {
                    "targetBlank": true,
                    "title": "Erreurs de trace pour ${__field.labels.service_namespace}﻿﻿﻿﻿﻿﻿﻿",
                    "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"serviceName\":\"${__field.labels.service_namespace}﻿﻿﻿﻿﻿﻿﻿\",\"search\":\"error=true\"}],\"range\":{\"from\":\"now-1h\",\"to\":\"now\"}}"
                  }
                ],
                "mappings": [],
                "thresholds": {
                  "mode": "percentage",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "#EAB839",
                      "value": 20
                    },
                    {
                      "color": "red",
                      "value": 50
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 24
            },
            "id": 45,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.1.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "(sum by (service_namespace)(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h])))/(sum by (service_namespace)(increase(traces_spanmetrics_calls_total{status_code!=\"\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h])))",
                "interval": "",
                "legendFormat": "{{service_namespace}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "hide": false,
                "refId": "B"
              }
            ],
            "title": "Pourcentage d'erreur par \"service\" sur la dernière heure",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "tempo",
              "uid": "tempo"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "auto",
                  "displayMode": "auto",
                  "inspect": false
                },
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Trace ID"
                  },
                  "properties": [
                    {
                      "id": "links",
                      "value": [
                        {
                          "targetBlank": true,
                          "title": "Trace ID",
                          "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"query\":\"${__data.fields.traceID}\",\"queryType\":\"traceId\",\"refId\":\"A\"}],\"range\":{\"from\":\"${__from}\",\"to\":\"${__to}\"}}"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 31
            },
            "id": 6,
            "options": {
              "footer": {
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true,
              "sortBy": [
                {
                  "desc": false,
                  "displayName": "Start time"
                }
              ]
            },
            "pluginVersion": "9.1.1",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "loki"
                },
                "expr": "{job=\"agent\"} | logfmt | status=\"STATUS_CODE_ERROR\"",
                "queryType": "nativeSearch",
                "refId": "A",
                "search": "error=true "
              }
            ],
            "title": "Erreurs totales",
            "type": "table"
          }
        ],
        "title": "Erreurs",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 20
        },
        "id": 33,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 4
            },
            "id": 35,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(0.95, (sum (rate(traces_spanmetrics_calls_total{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m]))))",
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.95, sum(rate(traces_spanmetrics_latency_bucket{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[5m])) by (le, service_namespace))",
                "hide": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "Latence exemplar",
            "type": "timeseries"
          }
        ],
        "title": "Exemplars",
        "type": "row"
      }
    ],
    "refresh": "5s",
    "schemaVersion": 37,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": [
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum",
          "description": "environnement de déploiement",
          "hide": 0,
          "includeAll": true,
          "label": "environnement",
          "multi": true,
          "name": "environment",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "/.*deployment_environment=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\"}",
          "description": "equipe",
          "hide": 0,
          "includeAll": true,
          "label": "equipe",
          "multi": true,
          "name": "equipe",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\"}",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "/.*equipe_nom=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": false,
            "text": "All",
            "value": "$__all"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
          "description": "cloud provider source",
          "hide": 0,
          "includeAll": true,
          "label": "plateforme",
          "multi": true,
          "name": "cloudprovider",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
            "refId": "StandardVariableQuery"
          },
          "refresh": 2,
          "regex": "/.*cloud_provider=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum{cloud_provider=~\"$cloudprovider\",deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
          "description": "composant",
          "hide": 0,
          "includeAll": true,
          "label": "composant",
          "multi": true,
          "name": "composant",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum{cloud_provider=~\"$cloudprovider\",deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "/.*service_namespace=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-3h",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Traces et Métriques - RED avec Rows",
    "uid": "dwEzzmFVa",
    "version": 1,
    "weekStart": ""
    }
  dashboard_composants_equipe.json: |-
    {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "description": "",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "Transactions (traces)  par minute (Throughput)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "tpm",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "displayName": "tpm",
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 16,
          "x": 0,
          "y": 0
        },
        "id": 15,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (rate(traces_spanmetrics_calls_total{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m]))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "hide": false,
            "refId": "B"
          }
        ],
        "title": "Traces par minutes",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "percentage",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "#EAB839",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 50
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 8,
          "x": 16,
          "y": 0
        },
        "id": 13,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "exemplar": true,
            "expr": "(sum(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\",equipe_nom=~\"$equipe\"}[1m]))/sum(increase(traces_spanmetrics_calls_total{cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1m]))) * 100",
            "hide": true,
            "interval": "",
            "legendFormat": "Last minute",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "(sum(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))/sum(increase(traces_spanmetrics_calls_total{cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))*100)",
            "hide": false,
            "legendFormat": "Last hour",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "Pourcentage d'erreur global sur la dernière heure",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "taux d'erreur sur la dernière heure",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Erreurs de trace pour ${__field.labels.span_name}﻿﻿﻿﻿﻿﻿﻿",
                "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"spanName\":\"${__field.labels.span_name}﻿﻿﻿﻿﻿﻿﻿\",\"search\":\"error=true\"}],\"range\":{\"from\":\"now-1h\",\"to\":\"now\"}}"
              }
            ],
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "percentage",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "#EAB839",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 50
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 8,
          "x": 16,
          "y": 4
        },
        "id": 10,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "exemplar": true,
            "expr": "(sum by (span_name)(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h])))/(sum by (span_name)(increase(traces_spanmetrics_calls_total{status_code!=\"\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))*100)",
            "interval": "",
            "legendFormat": "{{span_name}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Pourcentage d'erreur par \"span\" sur la dernière heure",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 57,
              "gradientMode": "hue",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 7,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Details",
                "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"sum by(service) (traces_spanmetrics_latency_bucket{service=\\\"${__field.labels.service}\\\"})\",\"editorMode\":\"code\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"queryType\":\"nativeSearch\",\"serviceName\":\"${__field.labels.service}\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 9,
          "w": 16,
          "x": 0,
          "y": 8
        },
        "id": 11,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "exemplar": true,
            "expr": "sum by (service)(rate(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m]) / rate(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m])) * 55",
            "interval": "",
            "legendFormat": "{{service_namespace}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Répartition par service",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "filterable": false,
              "inspect": false
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Traces for service ${__data.fields.service} ",
                "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"serviceName\" : \"${__data.fields.service}\"}]"
              }
            ],
            "mappings": [
              {
                "options": {
                  "NaN": {
                    "color": "green",
                    "index": 0,
                    "text": "0 ms"
                  }
                },
                "type": "value"
              }
            ],
            "noValue": "No value",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 65
                }
              ]
            },
            "unit": "s"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Value #A"
              },
              "properties": [
                {
                  "id": "custom.displayMode",
                  "value": "lcd-gauge"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 16,
          "y": 9
        },
        "id": 2,
        "links": [],
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "frameIndex": 0,
          "showHeader": true,
          "sortBy": [
            {
              "desc": true,
              "displayName": "Average Latency"
            }
          ]
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "topk(10, sum by (service)(increase(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m]) / increase(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m])))",
            "format": "table",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Top 10 latences de service les plus élevées sur les 5 dernières minutes",
        "transformations": [
          {
            "id": "filterFieldsByName",
            "options": {
              "include": {
                "names": [
                  "Value",
                  "service"
                ]
              }
            }
          },
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "Value": false,
                "service": false
              },
              "indexByName": {},
              "renameByName": {
                "Value": "Latency (ms)",
                "Value #A": "Average Latency",
                "http_method": "HTTP Method",
                "http_target": "Endpoint",
                "service": ""
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 23,
              "gradientMode": "hue",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 7,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Details",
                "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"sum by(service) (traces_spanmetrics_latency_bucket{service=\\\"${__field.labels.service}\\\"})\",\"editorMode\":\"code\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"queryType\":\"nativeSearch\",\"serviceName\":\"${__field.labels.service}\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 13,
          "x": 0,
          "y": 17
        },
        "id": 4,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "exemplar": true,
            "expr": "sum by (service)(increase(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[10m]) / increase(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[10m]))",
            "interval": "",
            "legendFormat": "",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Latences de tous les \"Endpoints\" sur les 10 dernières minutes (en ms)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 11,
          "x": 13,
          "y": 17
        },
        "id": 17,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true,
            "width": 320
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "(sum by (span_name) (avg_over_time(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m]))*100)",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "hide": false,
            "refId": "B"
          }
        ],
        "title": "Temps passé par span (en %) par heure",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 25
        },
        "id": 23,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "avg by (span_kind)((traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"})/(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "hide": false,
            "refId": "B"
          }
        ],
        "title": "Latence par type de span",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 25
        },
        "id": 25,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "avg by (span_name)((traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"})/(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Latence par nom de span",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "tempo",
          "uid": "tempo"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "inspect": false
            },
            "links": [],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Trace ID"
              },
              "properties": [
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "Trace ID",
                      "url": "http://ti-grafana.sandbox-base.k8s.pole-emploi.intra/explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"query\":\"${__data.fields.traceID}\",\"queryType\":\"traceId\",\"refId\":\"A\"}],\"range\":{\"from\":\"${__from}\",\"to\":\"${__to}\"}}"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 33
        },
        "id": 6,
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": [
            {
              "desc": false,
              "displayName": "Start time"
            }
          ]
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "expr": "{job=\"agent\"} | logfmt | status=\"STATUS_CODE_ERROR\"",
            "queryType": "nativeSearch",
            "refId": "A",
            "search": "error=true ",
            "serviceName": "${composant}"
          }
        ],
        "title": "Erreurs",
        "type": "table"
      }
    ],
    "refresh": "5s",
    "schemaVersion": 37,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": [
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum",
          "description": "environnement de déploiement",
          "hide": 0,
          "includeAll": true,
          "label": "environnement",
          "multi": true,
          "name": "environment",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "/.*deployment_environment=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\"}",
          "description": "equipe",
          "hide": 0,
          "includeAll": true,
          "label": "equipe",
          "multi": true,
          "name": "equipe",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\"}",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "/.*equipe_nom=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
          "description": "cloud provider source",
          "hide": 0,
          "includeAll": true,
          "label": "plateforme",
          "multi": true,
          "name": "cloudprovider",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
            "refId": "StandardVariableQuery"
          },
          "refresh": 2,
          "regex": "/.*cloud_provider=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "traces_spanmetrics_latency_sum{cloud_provider=~\"$cloudprovider\",deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
          "description": "composant",
          "hide": 0,
          "includeAll": true,
          "label": "composant",
          "multi": true,
          "name": "composant",
          "options": [],
          "query": {
            "query": "traces_spanmetrics_latency_sum{cloud_provider=~\"$cloudprovider\",deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"}",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "/.*service_namespace=\"(.*?[^\\\\])\".*/",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-15m",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Traces et Métriques - RED",
    "uid": "2PSZN_O4z",
    "version": 1,
    "weekStart": ""
    }
  dashboard_tempo_operational.json: |-
    {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        },
        {
          "datasource": {
            "uid": "$logsds"
          },
          "enable": true,
          "expr": "{cluster=\"$cluster\", diff_namespace=\"$namespace\", container=\"kube-diff-logger\"}",
          "hide": true,
          "iconColor": "rgba(255, 96, 96, 1)",
          "name": "diffs",
          "showIn": 0,
          "target": {}
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 1,
    "id": 14,
    "links": [
      {
        "asDropdown": true,
        "icon": "external link",
        "includeVars": true,
        "keepTime": true,
        "tags": [
          "tempo"
        ],
        "targetBlank": false,
        "title": "Tempo Dashboards",
        "type": "dashboards"
      }
    ],
    "liveNow": false,
    "panels": [
      {
        "collapsed": false,
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 38,
        "panels": [],
        "title": "General",
        "type": "row"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 0,
          "y": 1
        },
        "id": 24,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.0.0-d373beebpre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "rate(go_gc_duration_seconds_count{job=~\"$job\"}[$__rate_interval])",
            "interval": "",
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "gcs",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "decbytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 4,
          "y": 1
        },
        "id": 25,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.0.0-d373beebpre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "go_memstats_heap_inuse_bytes{ job=~\"$job\"}",
            "interval": "",
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "go heap",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 8,
          "y": 1
        },
        "id": 23,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d373beebpre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "go_goroutines{job=~\"$job\"}",
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "goroutines",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "continuous-BlYlRd"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 12,
          "y": 1
        },
        "id": 42,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.0.0-d373beebpre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "rate(container_cpu_usage_seconds_total{container!=\"POD\", pod=\"$component\"}[$__rate_interval])",
            "interval": "",
            "intervalFactor": 5,
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "cpu",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "decbytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 16,
          "y": 1
        },
        "id": 43,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.0.0-d373beebpre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "container_memory_working_set_bytes{ container!=\"POD\", pod=~\"$component\"}",
            "interval": "",
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "working set",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "decbytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 20,
          "y": 1
        },
        "id": 44,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.0.0-d373beebpre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "rate(container_network_receive_bytes_total{}[$__rate_interval])",
            "hide": true,
            "interval": "",
            "legendFormat": "rx-{{pod}}",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "rate(container_network_transmit_bytes_total{ pod=~\"$component\"}[$__rate_interval])",
            "hide": false,
            "interval": "",
            "legendFormat": "tx-{{pod}}",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "tx/rx",
        "type": "timeseries"
      },
      {
        "collapsed": true,
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 6
        },
        "id": 49,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percentunit"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 3,
              "x": 0,
              "y": 7
            },
            "id": 33,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "tempodb_work_queue_length{job=~\"$job\"} / tempodb_work_queue_max{job=~\"$job\"}",
                "legendFormat": "{{instance}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "%age total work queue",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 3,
              "x": 3,
              "y": 7
            },
            "id": 32,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(increase(tempodb_compaction_errors_total{ job=~\"$job\"}[$__rate_interval])) by (job)",
                "legendFormat": "compaction_err",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(increase(tempodb_retention_errors_total{job=~\"$job\"}[$__rate_interval])) by (job)",
                "legendFormat": "retention_err",
                "range": true,
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(increase(tempodb_blocklist_poll_errors_total{job=~\"$job\"}[$__rate_interval])) by (job)",
                "legendFormat": "blocklist_err",
                "range": true,
                "refId": "D"
              }
            ],
            "title": "maintenance errors",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "points",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 6,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 3,
              "x": 6,
              "y": 7
            },
            "id": 35,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(tempodb_blocklist_poll_duration_seconds_bucket{ job=~\"$job\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(tempodb_blocklist_poll_duration_seconds_bucket{job=~\"$job\"}[$__rate_interval])) by (le))",
                "legendFormat": ".9",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(tempodb_blocklist_poll_duration_seconds_bucket{ job=~\"$job\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Blocklist Poll Duration",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 3,
              "x": 9,
              "y": 7
            },
            "id": 47,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "avg(tempodb_blocklist_length{ job=~\"$job\"}) by (tenant)",
                "instant": false,
                "interval": "",
                "legendFormat": "{{tenant}}",
                "refId": "A"
              }
            ],
            "title": "Blocklist Length",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "points",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 6,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 3,
              "x": 12,
              "y": 7
            },
            "id": 51,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(tempodb_retention_duration_seconds_bucket{job=~\"$job\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(tempodb_retention_duration_seconds_bucket{job=~\"$job\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(tempodb_retention_duration_seconds_bucket{ job=~\"$job\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "retention duration",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 3,
              "x": 15,
              "y": 7
            },
            "id": 53,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(increase(tempodb_retention_deleted_total{job=~\"$job\"}[$__rate_interval]))",
                "interval": "",
                "legendFormat": "deleted",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(increase(tempodb_retention_marked_for_deletion_total{job=~\"$job\"}[$__rate_interval]))",
                "interval": "",
                "legendFormat": "marked_for_deletion",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "retention",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "auto",
                  "displayMode": "auto",
                  "inspect": false
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 18,
              "y": 7
            },
            "id": 70,
            "options": {
              "footer": {
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "frameIndex": 1,
              "showHeader": true
            },
            "pluginVersion": "9.1.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "increase(kube_pod_container_status_restarts_total{}[1d]) > 0",
                "format": "table",
                "hide": false,
                "instant": false,
                "interval": "",
                "legendFormat": "{{pod}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Container Restarts",
            "type": "table"
          }
        ],
        "title": "Maintenance",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 7
        },
        "id": 21,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 0,
              "y": 8
            },
            "id": 34,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\".*api_traces_traceid\",  job=\"$job\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Queries/Sec (cortex-gw)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 4,
              "y": 8
            },
            "id": 78,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Query Latency (Gateway)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 12,
              "y": 8
            },
            "id": 97,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\".*api_search.*\", job=\"$job\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              }
            ],
            "title": "Search Queries/Sec (cortex-gw)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 16,
              "y": 8
            },
            "id": 93,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                "hide": false,
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                "hide": false,
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C",
                "stepMode": "min"
              }
            ],
            "title": "Search Query Latency (Gateway)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 0,
              "y": 13
            },
            "id": 90,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\".*api_traces_traceid\", job=\"$job\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Queries/Sec (Query Frontend)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 4,
              "y": 13
            },
            "id": 17,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Query Latency (Query Frontend)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 12,
              "y": 13
            },
            "id": 98,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "sum(rate(tempo_request_duration_seconds_count{ route=~\".*api_search.*\", job=\"$job\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              }
            ],
            "title": "Search Queries/Sec (Query Frontend)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 16,
              "y": 13
            },
            "id": 94,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\".*api_search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C",
                "stepMode": "min"
              }
            ],
            "title": "Search Query Latency (Query Frontend)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 0,
              "y": 18
            },
            "id": 91,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\"querier_.*api_traces_traceid\",  job=\"tempo-collector\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Queries/Sec (Querier)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 4,
              "y": 18
            },
            "id": 89,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\"querier_.*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"querier_.*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"querier_.*api_traces_traceid\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Query Latency (Querier)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 12,
              "y": 18
            },
            "id": 99,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\"querier_.*api_search.*\", job=\"$job\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              }
            ],
            "title": "Search Queries/Sec (Querier)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 16,
              "y": 18
            },
            "id": 95,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"querier_.*api_search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"querier_.*api_search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"querier_.*api_search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C",
                "stepMode": "min"
              }
            ],
            "title": "Search Query Latency (Querier)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 0,
              "y": 23
            },
            "id": 92,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempo_request_duration_seconds_count{route=\"/tempopb.Querier/FindTraceByID\", job=\"tempo-collector\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Queries/Sec (Ingester)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 4,
              "y": 23
            },
            "id": 3,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=\"/tempopb.Querier/FindTraceByID\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=\"/tempopb.Querier/FindTraceByID\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=\"/tempopb.Querier/FindTraceByID\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Query Latency (Ingester)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 12,
              "y": 23
            },
            "id": 100,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "sum(rate(tempo_request_duration_seconds_count{route=~\"/tempopb.Querier/Search.*\", job=\"$job\"}[$__rate_interval])) by (status_code)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{status_code}}",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              }
            ],
            "title": "Search Queries/Sec (Ingester)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 16,
              "y": 23
            },
            "id": 96,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"/tempopb.Querier/Search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".99",
                "range": true,
                "refId": "A",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\"/tempopb.Querier/Search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".9",
                "range": true,
                "refId": "B",
                "stepMode": "min"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "exemplar": true,
                "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\", route=~\"/tempopb.Querier/Search.*\"}[$__rate_interval])) by (le))",
                "interval": "",
                "legendFormat": ".5",
                "range": true,
                "refId": "C",
                "stepMode": "min"
              }
            ],
            "title": "Search Query Latency (Ingester)",
            "type": "timeseries"
          }
        ],
        "title": "Read",
        "type": "row"
      },
      {
        "collapsed": false,
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 8
        },
        "id": 19,
        "panels": [],
        "title": "Write",
        "type": "row"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "normal"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 5,
          "x": 0,
          "y": 9
        },
        "id": 10,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum by(cluster) (rate(tempo_distributor_spans_received_total{}[$__rate_interval]))",
            "interval": "",
            "legendFormat": "{{pod}}",
            "queryType": "traceId",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Spans Received",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "normal"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 5,
          "x": 5,
          "y": 9
        },
        "id": 9,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum by(cluster) (rate(tempo_ingester_traces_created_total{}[$__rate_interval]))",
            "interval": "",
            "legendFormat": "",
            "queryType": "traceId",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Traces Created",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 10,
          "y": 9
        },
        "id": 8,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(tempo_ingester_blocks_flushed_total{job=\"$job\"}[1h]))",
            "interval": "",
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Blocks Flushed (1h)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 13,
          "y": 9
        },
        "id": 12,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "increase(tempo_ingester_failed_flushes_total{}[5m]) > 0",
            "interval": "",
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Failed Flushes",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 16,
          "y": 9
        },
        "id": 26,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(tempo_ingester_blocks_cleared_total{}[1h]))",
            "interval": "",
            "legendFormat": "",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Blocks Cleared (1h)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "points",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 6,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "always",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "s"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 4,
          "x": 20,
          "y": 9
        },
        "id": 36,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.99, sum(rate(tempo_ingester_flush_duration_seconds_bucket{}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".99",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.9, sum(rate(tempo_ingester_flush_duration_seconds_bucket{}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".9",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.5, sum(rate(tempo_ingester_flush_duration_seconds_bucket{}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".5",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "Flush Duration",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 10,
          "w": 9,
          "x": 0,
          "y": 14
        },
        "id": 71,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(rate(tempo_request_duration_seconds_count{ job=\"$job\"}[$__rate_interval])) by (status_code)",
            "interval": "",
            "legendFormat": "{{status_code}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Pushes/sec (gateway)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 10,
          "w": 9,
          "x": 9,
          "y": 14
        },
        "id": 72,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(rate(tempo_receiver_accepted_spans{}[$__rate_interval]))",
            "interval": "",
            "legendFormat": "accepted",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(rate(tempo_receiver_refused_spans{}[$__rate_interval]))",
            "interval": "",
            "legendFormat": "refused",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "OTEL Distributor Spans/second",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "s"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 18,
          "y": 14
        },
        "id": 79,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{}[$__rate_interval])) by (route))",
            "interval": "",
            "legendFormat": ".99",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\"}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".9",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{job=\"$job\"}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".5",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "Push Latency (Gateway)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "$ds"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "s"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 18,
          "y": 19
        },
        "id": 2,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "9.0.0-d452322apre",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.99, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".99",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "histogram_quantile(.9, sum(rate(tempo_request_duration_seconds_bucket{ job=\"$job\", route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".9",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "expr": "histogram_quantile(.5, sum(rate(tempo_request_duration_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", job=\"$namespace/ingester\", route=~\"/tempopb.Pusher/Push.*\"}[$__rate_interval])) by (le))",
            "interval": "",
            "legendFormat": ".5",
            "refId": "C"
          }
        ],
        "title": "Push Latency (Ingester)",
        "type": "timeseries"
      },
      {
        "collapsed": true,
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 24
        },
        "id": 74,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 50
            },
            "id": 75,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(cortex_consul_request_duration_seconds_count{ job=~\"$job\"}[$__rate_interval])) by (status_code, method)",
                "interval": "",
                "legendFormat": "{{status_code}}-{{method}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Requests/Second",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 50
            },
            "id": 76,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(cortex_consul_request_duration_seconds_bucket{job=~\"$job\"}[$__rate_interval])) by (method, le))",
                "interval": "",
                "legendFormat": ".99-{{method}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(cortex_consul_request_duration_seconds_bucket{job=~\"$job\"}[$__rate_interval])) by (method, le))",
                "interval": "",
                "legendFormat": ".9-{{method}}",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(cortex_consul_request_duration_seconds_bucket{ job=~\"$job\"}[$__rate_interval])) by (method, le))",
                "interval": "",
                "legendFormat": ".5-{{method}}",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Latency By Operation",
            "type": "timeseries"
          }
        ],
        "title": "Memcached",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 25
        },
        "id": 28,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 59
            },
            "id": 31,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempodb_backend_request_duration_seconds_count{ job=~\"$job\"}[$__rate_interval])) by (status_code, operation)",
                "interval": "",
                "legendFormat": "{{status_code}}-{{operation}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Requests/Second",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 59
            },
            "id": 30,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.99, sum(rate(tempodb_backend_request_duration_seconds_bucket{ job=~\"$job\"}[$__rate_interval])) by (operation, le))",
                "legendFormat": ".99-{{operation}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.9, sum(rate(tempodb_backend_request_duration_seconds_bucket{ job=~\"$job\"}[$__rate_interval])) by (operation, le))",
                "legendFormat": ".9-{{operation}}",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "histogram_quantile(.5, sum(rate(tempodb_backend_request_duration_seconds_bucket{job=~\"$job\"}[$__rate_interval])) by (operation, le))",
                "legendFormat": ".5-{{operation}}",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Latency By Operation",
            "type": "timeseries"
          }
        ],
        "title": "Backend",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 26
        },
        "id": 81,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 4,
              "x": 0,
              "y": 68
            },
            "id": 83,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempodb_compaction_objects_combined_total{job=~\"$job\"}[$__rate_interval])) by (level)",
                "interval": "",
                "legendFormat": "",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Objects Combined / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "$ds"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 4,
              "x": 4,
              "y": 68
            },
            "id": 85,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempodb_compaction_objects_written_total{job=\"$job\"}[$__rate_interval])) by (level)",
                "interval": "",
                "legendFormat": "",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Objects Written / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 4,
              "x": 8,
              "y": 68
            },
            "id": 88,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(rate(tempodb_compaction_bytes_written_total{job=\"$job\"}[$__rate_interval])) by (level)",
                "interval": "",
                "legendFormat": "__auto",
                "queryType": "traceId",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Bytes Written / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 4,
              "x": 12,
              "y": 68
            },
            "id": 86,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.0-d373beebpre",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "editorMode": "code",
                "expr": "sum(increase(tempodb_compaction_blocks_total{job=\"$job\"}[5m])) by (level)",
                "interval": "",
                "legendFormat": "__auto",
                "queryType": "traceId",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Blocks Compacted",
            "type": "timeseries"
          }
        ],
        "title": "Compactor",
        "type": "row"
      }
    ],
    "refresh": false,
    "schemaVersion": 37,
    "style": "dark",
    "tags": [
      "tempo"
    ],
    "templating": {
      "list": [
        {
          "current": {
            "selected": false,
            "text": "Prometheus",
            "value": "Prometheus"
          },
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "name": "ds",
          "options": [],
          "query": "prometheus",
          "queryValue": "",
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "type": "datasource"
        },
        {
          "current": {
            "selected": false,
            "text": "tempo:3100",
            "value": "tempo:3100"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "label_values(tempo_build_info, instance)",
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "name": "cluster",
          "options": [],
          "query": {
            "query": "label_values(tempo_build_info, instance)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "tagValuesQuery": "",
          "tagsQuery": "",
          "type": "query",
          "useTags": false
        },
        {
          "current": {
            "selected": false,
            "text": "tempo-collector",
            "value": "tempo-collector"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "$ds"
          },
          "definition": "label_values(tempo_build_info,job)",
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "name": "job",
          "options": [],
          "query": {
            "query": "label_values(tempo_build_info,job)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "tagValuesQuery": "",
          "tagsQuery": "",
          "type": "query",
          "useTags": false
        },
        {
          "current": {
            "selected": false,
            "text": "do001-backend-78dc889bfd-2wsvx",
            "value": "do001-backend-78dc889bfd-2wsvx"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "label_values(container_network_transmit_bytes_total, pod)",
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "name": "component",
          "options": [],
          "query": {
            "query": "label_values(container_network_transmit_bytes_total, pod)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "2022-10-11T07:46:41.889Z",
      "to": "2022-10-11T15:46:41.889Z"
    },
    "timepicker": {
      "refresh_intervals": [
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ]
    },
    "timezone": "",
    "title": "Tempo Operational",
    "uid": "a6175b9cc7ec20591890117c39580030",
    "version": 14,
    "weekStart": ""
    }
  tempo_ressources.json: |-
    {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "grafana",
            "uid": "-- Grafana --"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 8,
    "links": [
      {
        "asDropdown": true,
        "icon": "external link",
        "includeVars": true,
        "keepTime": true,
        "tags": [
          "tempo"
        ],
        "targetBlank": false,
        "title": "Tempo Dashboards",
        "type": "dashboards"
      }
    ],
    "liveNow": false,
    "panels": [
      {
        "collapsed": false,
        "datasource": {
          "type": "tempo",
          "uid": "tempo"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 22,
        "panels": [],
        "targets": [
          {
            "datasource": {
              "type": "tempo",
              "uid": "tempo"
            },
            "refId": "A"
          }
        ],
        "title": "Container TEMPO",
        "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
          "type": "prometheus",
          "uid": "$datasource"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 0,
          "y": 1
        },
        "hiddenSeries": false,
        "id": 1,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "links": [],
        "nullPointMode": "null as zero",
        "options": {
          "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.1.1",
        "pointradius": 5,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [
          {
            "alias": "limit",
            "color": "#E02F44",
            "fill": 0
          }
        ],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{namespace=~\"monitoring\",container=\"tempo\"}[$__interval]))",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A",
            "step": 10
          },
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "min(container_spec_cpu_quota{namespace=~\"monitoring\",container=\"tempo\"} / container_spec_cpu_period{namespace=~\"monitoring\",container=\"tempo\"})",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "limit",
            "range": true,
            "refId": "B",
            "step": 10
          }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "CPU",
        "tooltip": {
          "shared": true,
          "sort": 2,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "mode": "time",
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "short",
            "logBase": 1,
            "min": 0,
            "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "show": false
          }
        ],
        "yaxis": {
          "align": false
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
          "type": "prometheus",
          "uid": "$datasource"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 8,
          "y": 1
        },
        "hiddenSeries": false,
        "id": 2,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "links": [],
        "nullPointMode": "null as zero",
        "options": {
          "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.1.1",
        "pointradius": 5,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [
          {
            "alias": "limit",
            "color": "#E02F44",
            "fill": 0
          }
        ],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "sum by(pod) (container_memory_working_set_bytes{namespace=~\"monitoring\",container=\"tempo\"})",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A",
            "step": 10
          },
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "min(container_spec_memory_limit_bytes{namespace=~\"monitoring\",container=\"tempo\"} > 0)",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "limit",
            "range": true,
            "refId": "B",
            "step": 10
          }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "Memory (workingset)",
        "tooltip": {
          "shared": true,
          "sort": 2,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "mode": "time",
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "bytes",
            "logBase": 1,
            "min": 0,
            "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "show": false
          }
        ],
        "yaxis": {
          "align": false
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
          "type": "prometheus",
          "uid": "$datasource"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 16,
          "y": 1
        },
        "hiddenSeries": false,
        "id": 3,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "links": [],
        "nullPointMode": "null as zero",
        "options": {
          "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.1.1",
        "pointradius": 5,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "sum by(instance) (go_gc_heap_allocs_by_size_bytes_total_sum)",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "{{instance}}",
            "range": true,
            "refId": "A",
            "step": 10
          }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "Sum Heap Alloc",
        "tooltip": {
          "shared": true,
          "sort": 2,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "mode": "time",
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "bytes",
            "logBase": 1,
            "min": 0,
            "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "show": false
          }
        ],
        "yaxis": {
          "align": false
        }
      },
      {
        "collapsed": false,
        "datasource": {
          "type": "tempo",
          "uid": "tempo"
        },
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 8
        },
        "id": 25,
        "panels": [],
        "targets": [
          {
            "datasource": {
              "type": "tempo",
              "uid": "tempo"
            },
            "refId": "A"
          }
        ],
        "title": "Tempo Ingester Prometheus Metrics",
        "type": "row"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
          "type": "prometheus",
          "uid": "$datasource"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 0,
          "y": 9
        },
        "hiddenSeries": false,
        "id": 10,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "links": [],
        "nullPointMode": "null as zero",
        "options": {
          "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.1.1",
        "pointradius": 5,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [
          {
            "alias": "limit",
            "color": "#E02F44",
            "fill": 0
          }
        ],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "rate(tempo_ingester_bytes_received_total{instance=\"tempo:3100\"}[$__rate_interval])",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A",
            "step": 10
          }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "Ingester bytes received",
        "tooltip": {
          "shared": true,
          "sort": 2,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "mode": "time",
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "short",
            "logBase": 1,
            "min": 0,
            "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "show": false
          }
        ],
        "yaxis": {
          "align": false
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
          "type": "prometheus",
          "uid": "$datasource"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 8,
          "y": 9
        },
        "hiddenSeries": false,
        "id": 11,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "links": [],
        "nullPointMode": "null as zero",
        "options": {
          "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.1.1",
        "pointradius": 5,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [
          {
            "alias": "limit",
            "color": "#E02F44",
            "fill": 0
          }
        ],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "tempo_ingester_bytes_received_total{instance=\"tempo:3100\"}",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "{{pod}}",
            "range": true,
            "refId": "A",
            "step": 10
          }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "Tempo ingestor bytes received total",
        "tooltip": {
          "shared": true,
          "sort": 2,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "mode": "time",
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "bytes",
            "logBase": 1,
            "min": 0,
            "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "show": false
          }
        ],
        "yaxis": {
          "align": false
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": {
          "type": "prometheus",
          "uid": "$datasource"
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 16,
          "y": 9
        },
        "hiddenSeries": false,
        "id": 12,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "links": [],
        "nullPointMode": "null as zero",
        "options": {
          "alertThreshold": true
        },
        "percentage": false,
        "pluginVersion": "9.1.1",
        "pointradius": 5,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "datasource": {
              "uid": "$datasource"
            },
            "editorMode": "code",
            "expr": "tempodb_backend_bytes_total{instance=\"tempo:3100\"}",
            "format": "time_series",
            "interval": "1m",
            "intervalFactor": 2,
            "legendFormat": "{{instance}}",
            "range": true,
            "refId": "A",
            "step": 10
          }
        ],
        "thresholds": [],
        "timeRegions": [],
        "title": "TempodB backend bytes",
        "tooltip": {
          "shared": true,
          "sort": 2,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "mode": "time",
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "bytes",
            "logBase": 1,
            "min": 0,
            "show": true
          },
          {
            "format": "short",
            "logBase": 1,
            "show": false
          }
        ],
        "yaxis": {
          "align": false
        }
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 8,
          "y": 16
        },
        "id": 27,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "builder",
            "expr": "tempo_metrics_generator_spans_received_total{instance=\"tempo:3100\"}",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Spans received Total",
        "type": "timeseries"
      }
    ],
    "refresh": "2h",
    "schemaVersion": 37,
    "style": "dark",
    "tags": [
      "Tempo"
    ],
    "templating": {
      "list": [
        {
          "current": {
            "selected": false,
            "text": "Prometheus",
            "value": "Prometheus"
          },
          "hide": 0,
          "includeAll": false,
          "label": "Data Source",
          "multi": false,
          "name": "datasource",
          "options": [],
          "query": "prometheus",
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "type": "datasource"
        }
      ]
    },
    "time": {
      "from": "now-1h",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ],
      "time_options": [
        "5m",
        "15m",
        "1h",
        "6h",
        "12h",
        "24h",
        "2d",
        "7d",
        "30d"
      ]
    },
    "timezone": "utc",
    "title": "Tempo / Resources",
    "uid": "u9oGwb74k",
    "version": 2,
    "weekStart": ""
    }
  loki_traces_metriques.json: |-
    {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": false,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "description": "",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 10,
    "links": [
      {
        "asDropdown": true,
        "icon": "external link",
        "includeVars": true,
        "keepTime": true,
        "tags": [
          "OpenTelemetry"
        ],
        "targetBlank": true,
        "title": "OpenTelemetry Dashboards",
        "tooltip": "",
        "type": "dashboards",
        "url": ""
      }
    ],
    "liveNow": false,
    "panels": [
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "This is the total number of requests made in this period (top-right period selected)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "N/A"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 0,
          "y": 0
        },
        "id": 28,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(otel_metrics_http_server_requests_max{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[${__range_s}s]))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Requests (period)",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "This is the number of successful requests in the last minute.  Successful being 1xx or 2xx by the standard HTTP definition.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "N/A"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 3,
          "y": 0
        },
        "id": 29,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(otel_metrics_http_server_requests_max{status=~\"(1|2).*\"}[5m]))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "HTTP 1/2xx (2m)",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "This is the number of 3xx requests in the last minute.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "N/A"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 6,
          "y": 0
        },
        "id": 31,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(otel_metrics_http_server_requests_max{status=~\"3.*\", service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[$__interval])) or vector(0)",
            "interval": "",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "HTTP 3xx (2m)",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "This is the number of 4xx requests in the last minute.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "N/A"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 9,
          "y": 0
        },
        "id": 32,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(otel_metrics_http_server_requests_max{status=~\"4.*\", service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1h]))",
            "interval": "",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "HTTP 4xx (2m)",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "This is the number of 5xx requests in the last minute.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "N/A"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 12,
          "y": 0
        },
        "id": 30,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(otel_metrics_http_server_requests_max{status=~\"5.*\", service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1h]))",
            "hide": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "HTTP 5xx (2m)",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "The breakdown of the various HTTP status codes of the requests handled within' this period that matches the variables chosen above.\n",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "N/A"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 9,
          "x": 15,
          "y": 0
        },
        "id": 33,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(increase(otel_metrics_http_server_requests_max{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1h]))  by (status)",
            "hide": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "HTTP Status Codes",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "loki"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "0"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "green",
                  "value": 10
                },
                {
                  "color": "green",
                  "value": 50
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 8,
          "x": 0,
          "y": 4
        },
        "id": 40,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "sum"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "editorMode": "code",
            "expr": " sum(count_over_time(({service_namespace=~\"$composant\"} )[$__interval]))",
            "queryType": "range",
            "refId": "A"
          }
        ],
        "title": "Nombre total de logs",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "loki"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "0"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "semi-dark-red",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 10
                },
                {
                  "color": "red",
                  "value": 50
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 8,
          "x": 8,
          "y": 4
        },
        "id": 41,
        "interval": "1m",
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "sum"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "editorMode": "code",
            "expr": "sum(count_over_time(({service_namespace=~\"$composant\"} |~ \"ERROR\")[$__interval]))",
            "hide": true,
            "queryType": "range",
            "refId": "A"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "editorMode": "code",
            "expr": "sum(count_over_time(({service_namespace=~\"petclinic\", level=\"ERROR\"}[$__interval])))",
            "hide": true,
            "queryType": "range",
            "refId": "B"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "editorMode": "code",
            "expr": "sum(count_over_time(({service_namespace=~\"$composant\", level=\"ERROR\"}[$__interval])))",
            "hide": false,
            "queryType": "range",
            "refId": "C"
          }
        ],
        "title": "Nombre total d'erreurs dans les logs",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "NaN": {
                    "index": 0,
                    "text": "0"
                  }
                },
                "type": "value"
              }
            ],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "percentage",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "#EAB839",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 50
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 8,
          "x": 16,
          "y": 4
        },
        "id": 13,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "(sum(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))/sum(increase(traces_spanmetrics_calls_total{cloud_provider=~\"$cloudprovider\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))*100)",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Pourcentage d'erreur global sur la dernière heure",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "loki"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 16,
          "x": 0,
          "y": 7
        },
        "id": 36,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "editorMode": "code",
            "expr": "sum(count_over_time({service_namespace=~\"$composant\"}[15m])) by (level, service_namespace)",
            "hide": false,
            "queryType": "range",
            "refId": "B"
          }
        ],
        "title": "Nombre de logs par niveaux par composants - Loki",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "taux d'erreur sur la dernière heure",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Erreurs de trace pour ${__field.labels.span_name}﻿﻿﻿﻿﻿﻿﻿",
                "url": "explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"spanName\":\"${__field.labels.span_name}﻿﻿﻿﻿﻿﻿﻿\",\"search\":\"status.code=error\"}],\"range\":{\"from\":\"now-1h\",\"to\":\"now\"}}"
              }
            ],
            "mappings": [
              {
                "options": {
                  "NaN": {
                    "index": 0,
                    "text": "0"
                  }
                },
                "type": "value"
              }
            ],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "percentage",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "#EAB839",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 50
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 8,
          "x": 16,
          "y": 8
        },
        "id": 10,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "(sum by (span_name)(increase(traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h])))/(sum by (span_name)(increase(traces_spanmetrics_calls_total{status_code!=\"\",service_namespace=~\"$composant\", equipe_nom=~\"$equipe\"}[1h]))*100)",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Pourcentage d'erreur par \"Endpoints\" sur la dernière heure",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "The breakdown of the various HTTP status codes of the requests handled within' this period that matches the variables chosen above.\n",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [
              {
                "options": {
                  "null": {
                    "index": 0,
                    "text": "N/A"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 16,
          "y": 13
        },
        "id": 34,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum by (service_namespace)(rate(otel_metrics_http_server_requests_bucket{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[5m]))",
            "hide": false,
            "interval": "",
            "legendFormat": "{{service_namespace}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Latence (metriques)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "loki"
        },
        "gridPos": {
          "h": 7,
          "w": 16,
          "x": 0,
          "y": 15
        },
        "id": 38,
        "options": {
          "dedupStrategy": "none",
          "enableLogDetails": true,
          "prettifyLogMessage": false,
          "showCommonLabels": false,
          "showLabels": false,
          "showTime": false,
          "sortOrder": "Descending",
          "wrapLogMessage": false
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "editorMode": "code",
            "expr": "{service_namespace=~\"$composant\"}",
            "queryType": "range",
            "refId": "A"
          }
        ],
        "title": "Live logs",
        "type": "logs"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "filterable": false,
              "inspect": false
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Traces for service ${__data.fields.service} ",
                "url": "explore?orgId=1&left=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"queryType\":\"nativeSearch\",\"serviceName\" : \"${__data.fields.service}\"}]"
              }
            ],
            "mappings": [
              {
                "options": {
                  "NaN": {
                    "color": "green",
                    "index": 0,
                    "text": "0 ms"
                  }
                },
                "type": "value"
              }
            ],
            "noValue": "No value",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 65
                }
              ]
            },
            "unit": "s"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Value #A"
              },
              "properties": [
                {
                  "id": "custom.displayMode",
                  "value": "lcd-gauge"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 9,
          "w": 8,
          "x": 16,
          "y": 20
        },
        "id": 2,
        "links": [],
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "frameIndex": 0,
          "showHeader": true,
          "sortBy": [
            {
              "desc": true,
              "displayName": "Average Latency"
            }
          ]
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "topk(10, sum by (service)(increase(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m]) / increase(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m])))",
            "format": "table",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Top 10 latences de service les plus élevées sur les 5 dernières minutes",
        "transformations": [
          {
            "id": "filterFieldsByName",
            "options": {
              "include": {
                "names": [
                  "Value",
                  "service"
                ]
              }
            }
          },
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "Value": false,
                "service": false
              },
              "indexByName": {},
              "renameByName": {
                "Value": "Latency (ms)",
                "Value #A": "Average Latency",
                "http_method": "HTTP Method",
                "http_target": "Endpoint",
                "service": ""
              }
            }
          },
          {
            "id": "groupBy",
            "options": {
              "fields": {
                "Latency (ms)": {
                  "aggregations": [
                    "first"
                  ],
                  "operation": "aggregate"
                },
                "service": {
                  "aggregations": [],
                  "operation": "groupby"
                }
              }
            }
          },
          {
            "id": "sortBy",
            "options": {
              "fields": {},
              "sort": [
                {
                  "desc": true,
                  "field": "Latency (ms) (first)"
                }
              ]
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "Transactions (traces)  par minute (Throughput)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "tpm",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "displayName": "tpm",
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 16,
          "x": 0,
          "y": 22
        },
        "id": 15,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (rate(traces_spanmetrics_calls_total{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[1m]))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Traces par minutes",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 57,
              "gradientMode": "hue",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 7,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Details",
                "url": "explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"sum by(service) (traces_spanmetrics_latency_bucket{service=\\\"${__field.labels.service}\\\"})\",\"editorMode\":\"code\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"queryType\":\"nativeSearch\",\"serviceName\":\"${__field.labels.service}\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 9,
          "w": 16,
          "x": 0,
          "y": 30
        },
        "id": 11,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum by (service)(rate(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m]) / rate(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}[1m])) * 55",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Répartition (rate) par service",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 23,
              "gradientMode": "hue",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "smooth",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 7,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "links": [
              {
                "targetBlank": true,
                "title": "Details",
                "url": "explore?orgId=1&left=[\"now-1h\",\"now\",\"Prometheus\",{\"refId\":\"A\",\"instant\":true,\"range\":true,\"exemplar\":true,\"expr\":\"sum by(service) (traces_spanmetrics_latency_bucket{service=\\\"${__field.labels.service}\\\"})\",\"editorMode\":\"code\"}]&right=\n[\"now-1h\",\"now\",\"Tempo\",{\"refId\":\"A\",\"queryType\":\"nativeSearch\",\"serviceName\":\"${__field.labels.service}\"}]"
              }
            ],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 16,
          "x": 0,
          "y": 39
        },
        "id": 4,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum by (service)(increase(traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[15m]) / increase(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\", equipe_nom=~\"$equipe\"}[15m]))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Latences par Services sur les 15 dernières minutes (en ms)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 24,
          "x": 0,
          "y": 47
        },
        "id": 25,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "avg by (span_name)((traces_spanmetrics_latency_sum{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"})/(traces_spanmetrics_latency_count{service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}))",
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Latence par Endpoints sur les 15 dernières minutes (en ms)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "Errerurs reportées sur les 15 dernières minutes",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "inspect": false
            },
            "links": [],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Trace ID"
              },
              "properties": [
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "Trace ID",
                      "url": "explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"query\":\"${__data.fields.traceID}\",\"queryType\":\"traceId\",\"refId\":\"A\"}],\"range\":{\"from\":\"${__from}\",\"to\":\"${__to}\"}}"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 54
        },
        "id": 6,
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": [
            {
              "desc": false,
              "displayName": "Start time"
            }
          ]
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "traces_spanmetrics_calls_total{status_code=\"STATUS_CODE_ERROR\",service_namespace=~\"$composant\",deployment_environment=~\"$environment\", cloud_provider=~\"$cloudprovider\",equipe_nom=~\"$equipe\"}",
            "format": "table",
            "instant": false,
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Erreurs totales par Services et Endpoints",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "Value": false,
                "__metrics_gen_instance": true,
                "__name__": true,
                "cadre": true,
                "cloud_provider": true,
                "deployment_environment": true,
                "environnement": true,
                "equipe_nom": true,
                "receive": true,
                "service_namespace": true,
                "span_kind": true,
                "status_code": true,
                "tenant_id": true
              },
              "indexByName": {},
              "renameByName": {
                "Value": "Quantité",
                "receive": "",
                "service": "Service",
                "span_kind": "",
                "span_name": "Endpoint"
              }
            }
          },
          {
            "id": "groupBy",
            "options": {
              "fields": {
                "Endpoint": {
                  "aggregations": [],
                  "operation": "groupby"
                },
                "Quantité": {
                  "aggregations": [
                    "first"
                  ],
                  "operation": "aggregate"
                },
                "Service": {
                  "aggregations": [],
                  "operation": "groupby"
                },
                "Time": {
                  "aggregations": [
                    "first"
                  ],
                  "operation": "aggregate"
                }
              }
            }
          },
          {
            "id": "sortBy",
            "options": {
              "fields": {},
              "sort": [
                {
                  "desc": true,
                  "field": "Quantité (first)"
                }
              ]
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "tempo",
          "uid": "tempo"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "inspect": false
            },
            "links": [],
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Trace ID"
              },
              "properties": [
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "Trace ID",
                      "url": "explore?orgId=1&left={\"datasource\":\"tempo\",\"queries\":[{\"query\":\"${__data.fields.traceID}\",\"queryType\":\"traceId\",\"refId\":\"A\"}],\"range\":{\"from\":\"${__from}\",\"to\":\"${__to}\"}}"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 62
        },
        "id": 26,
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": [
            {
              "desc": false,
              "displayName": "Start time"
            }
          ]
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "tempo",
              "uid": "tempo"
            },
            "expr": "{job=\"agent\"} | logfmt | status=\"STATUS_CODE_ERROR\"",
            "queryType": "nativeSearch",
            "refId": "A",
            "search": "status.code=error",
            "serviceName": "${composant}"
          }
        ],
        "title": "Sélectionnez un composant pour voir ses erreurs",
        "type": "table"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "loki"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "labels"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 709
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "exporter"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 70
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "level"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 75
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "service_name"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 145
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "attributes_exception_message"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 268
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "attributes_exception_stacktrace"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 177
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "attributes_exception_type"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 158
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "body"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 325
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Error_message"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 266
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "instrumentation_scope_name"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 299
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "resources_host_name"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 256
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "resources_process_command_line"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 222
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Plateforme"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 91
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Cadre"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 63
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Environnement"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 119
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Namespace"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 123
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "severity"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 106
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 70
        },
        "id": 42,
        "interval": "1m",
        "options": {
          "footer": {
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "9.3.6",
        "targets": [
          {
            "datasource": {
              "type": "loki",
              "uid": "loki"
            },
            "editorMode": "code",
            "expr": "{service_name=~\"$composant\", level=\"ERROR\"}| json | line_format \"{{.log}}\" ",
            "queryType": "range",
            "refId": "A"
          }
        ],
        "title": "Loki - Erreurs sur logs",
        "transformations": [
          {
            "id": "extractFields",
            "options": {
              "format": "kvp",
              "replace": true,
              "source": "labels"
            }
          },
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "attributes_exception_message": true,
                "attributes_exception_stacktrace": true,
                "attributes_exception_type": true,
                "resources_container_id": true,
                "resources_environnement": true,
                "resources_host_arch": true,
                "resources_host_name": true,
                "resources_k8s_container_name": true,
                "resources_k8s_deployment_name": true,
                "resources_k8s_node_name": true,
                "resources_k8s_replicaset_name": true,
                "resources_os_description": true,
                "resources_process_command_line": true,
                "resources_process_executable_path": true,
                "resources_process_pid": true,
                "resources_process_runtime_description": true,
                "resources_process_runtime_name": true,
                "resources_process_runtime_version": true,
                "resources_service_namespace": true,
                "resources_telemetry_auto_version": true,
                "resources_telemetry_sdk_language": true,
                "resources_telemetry_sdk_name": true,
                "resources_telemetry_sdk_version": true,
                "service_name": true,
                "service_namespace": true
              },
              "indexByName": {
                "attributes_exception_message": 2,
                "attributes_exception_stacktrace": 3,
                "attributes_exception_type": 4,
                "body": 5,
                "exporter": 0,
                "instrumentation_scope_name": 6,
                "level": 1,
                "resources_cadre": 7,
                "resources_cloud_provider": 8,
                "resources_container_id": 38,
                "resources_deployment_environment": 9,
                "resources_environnement": 10,
                "resources_host_arch": 11,
                "resources_host_name": 12,
                "resources_k8s_container_name": 13,
                "resources_k8s_deployment_name": 14,
                "resources_k8s_namespace_name": 17,
                "resources_k8s_node_name": 15,
                "resources_k8s_pod_name": 16,
                "resources_k8s_replicaset_name": 18,
                "resources_os_description": 19,
                "resources_os_type": 20,
                "resources_process_command_line": 21,
                "resources_process_executable_path": 22,
                "resources_process_pid": 23,
                "resources_process_runtime_description": 24,
                "resources_process_runtime_name": 25,
                "resources_process_runtime_version": 26,
                "resources_service_name": 27,
                "resources_service_namespace": 28,
                "resources_telemetry_auto_version": 29,
                "resources_telemetry_sdk_language": 30,
                "resources_telemetry_sdk_name": 31,
                "resources_telemetry_sdk_version": 32,
                "service_name": 33,
                "service_namespace": 34,
                "severity": 35,
                "spanid": 37,
                "traceid": 36
              },
              "renameByName": {
                "attributes_exception_message": "",
                "body": "Error_message",
                "instrumentation_scope_name": "",
                "resources_cadre": "Cadre",
                "resources_cloud_provider": "Plateforme",
                "resources_deployment_environment": "Environnement",
                "resources_k8s_deployment_name": "",
                "resources_k8s_namespace_name": "Namespace",
                "resources_k8s_pod_name": "Pod",
                "resources_service_name": "Service Name",
                "resources_service_namespace": ""
              }
            }
          }
        ],
        "type": "table"
      }
    ],
    "refresh": "30s",
    "schemaVersion": 37,
    "style": "dark",
    "tags": [
      "OpenTelemetry",
      "loki"
    ],
    "templating": {
      "list": [
        {
          "allValue": ".*",
          "current": {
            "selected": false,
            "text": "All",
            "value": "$__all"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "label_values(traces_spanmetrics_latency_sum,deployment_environment)",
          "description": "environnement de déploiement",
          "hide": 0,
          "includeAll": true,
          "label": "environnement",
          "multi": true,
          "name": "environment",
          "options": [],
          "query": {
            "query": "label_values(traces_spanmetrics_latency_sum,deployment_environment)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "label_values(traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\"},equipe_nom)}",
          "description": "equipe",
          "hide": 0,
          "includeAll": true,
          "label": "equipe",
          "multi": true,
          "name": "equipe",
          "options": [],
          "query": {
            "query": "label_values(traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\"},equipe_nom)}",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "label_values(traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"},cloud_provider)",
          "description": "cloud provider source",
          "hide": 0,
          "includeAll": true,
          "label": "plateforme",
          "multi": true,
          "name": "cloudprovider",
          "options": [],
          "query": {
            "query": "label_values(traces_spanmetrics_latency_sum{deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"},cloud_provider)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "allValue": ".+",
          "current": {
            "selected": true,
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          },
          "definition": "label_values(traces_spanmetrics_latency_sum{cloud_provider=~\"$cloudprovider\",deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"},service_namespace)",
          "description": "composant",
          "hide": 0,
          "includeAll": true,
          "label": "composant",
          "multi": true,
          "name": "composant",
          "options": [],
          "query": {
            "query": "label_values(traces_spanmetrics_latency_sum{cloud_provider=~\"$cloudprovider\",deployment_environment=~\"$environment\", equipe_nom=~\"$equipe\"},service_namespace)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-1h",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "OpenTelemetry - Traces et Métriques - RED / Loki",
    "uid": "yOeE0b14p",
    "version": 2,
    "weekStart": ""
    }
  benchmarks.json: |-
    {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "grafana",
            "uid": "-- Grafana --"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 15,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 18,
        "panels": [],
        "title": "CPU Usage",
        "type": "row"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 50,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 6,
          "x": 0,
          "y": 1
        },
        "id": 11,
        "links": [],
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true,
            "width": 600
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (rate (container_cpu_usage_seconds_total{namespace=\"quarkus-no-agent\", container!=\"\"}[5m])) by (container)",
            "hide": true,
            "interval": "10s",
            "intervalFactor": 1,
            "legendFormat": "{{container}}",
            "metric": "container_cpu",
            "range": true,
            "refId": "A",
            "step": 10
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "exemplar": true,
            "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"quarkus-no-agent\"}[5m])) by (pod, container_name) /\nsum(container_spec_cpu_quota{namespace=\"quarkus-no-agent\"}/container_spec_cpu_period{namespace=\"quarkus-no-agent\"}) by (pod, container_name)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(irate(container_cpu_usage_seconds_total{container !=\"\",container!=\"POD\",namespace=~\"quarkus-no-agent\"}[2m])) by (pod) / (sum(container_spec_cpu_quota{container !=\"\",container!=\"POD\",namespace=~\"quarkus-no-agent\"}/100000) by (pod)) * 100",
            "hide": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "CPU usage No Agent",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 50,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 6,
          "x": 6,
          "y": 1
        },
        "id": 12,
        "links": [],
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (rate (container_cpu_usage_seconds_total{namespace=\"quarkus-otel\", container!=\"\"}[5m])) by (container)",
            "hide": true,
            "interval": "10s",
            "intervalFactor": 1,
            "legendFormat": "{{container}}",
            "metric": "container_cpu",
            "range": true,
            "refId": "A",
            "step": 10
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"quarkus-otel\"}[5m])) by (pod, container_name) /\nsum(container_spec_cpu_quota{namespace=\"quarkus-otel\"}/container_spec_cpu_period{namespace=\"quarkus-otel\"}) by (pod, container_name)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(irate(container_cpu_usage_seconds_total{container !=\"\",container!=\"POD\",namespace=~\"quarkus-otel\"}[2m])) by (pod) / (sum(container_spec_cpu_quota{container !=\"\",container!=\"POD\",namespace=~\"quarkus-otel\"}/100000) by (pod)) * 100",
            "hide": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "CPU usage  Opentelemetry",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 50,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 6,
          "x": 12,
          "y": 1
        },
        "id": 13,
        "links": [],
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (rate (container_cpu_usage_seconds_total{namespace=\"quarkus-appdyn\", container!=\"\"}[5m])) by (container)",
            "hide": true,
            "interval": "10s",
            "intervalFactor": 1,
            "legendFormat": "{{ io_kubernetes_pod_name }}",
            "metric": "container_cpu",
            "range": true,
            "refId": "A",
            "step": 10
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"quarkus-appdyn\"}[5m])) by (pod, container_name) /\nsum(container_spec_cpu_quota{namespace=\"quarkus-appdyn\"}/container_spec_cpu_period{namespace=\"quarkus-appdyn\"}) by (pod, container_name)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(irate(container_cpu_usage_seconds_total{container !=\"\",container!=\"POD\",namespace=~\"quarkus-appdyn\"}[2m])) by (pod) / (sum(container_spec_cpu_quota{container !=\"\",container!=\"POD\",namespace=~\"quarkus-appdyn\"}/100000) by (pod)) * 100",
            "hide": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "CPU usage  AppDyn",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 50,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 6,
          "x": 18,
          "y": 1
        },
        "id": 14,
        "links": [],
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (rate (container_cpu_usage_seconds_total{namespace=\"quarkus-double\", container!=\"\"}[5m])) by (container)",
            "hide": true,
            "interval": "10s",
            "intervalFactor": 1,
            "legendFormat": "{{ io_kubernetes_pod_name }}",
            "metric": "container_cpu",
            "range": true,
            "refId": "A",
            "step": 10
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"quarkus-double\"}[5m])) by (pod, container_name) /\nsum(container_spec_cpu_quota{namespace=\"quarkus-double\"}/container_spec_cpu_period{namespace=\"quarkus-double\"}) by (pod, container_name)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum(irate(container_cpu_usage_seconds_total{container !=\"\",container!=\"POD\",namespace=~\"quarkus-double\"}[2m])) by (pod) / (sum(container_spec_cpu_quota{container !=\"\",container!=\"POD\",namespace=~\"quarkus-double\"}/100000) by (pod)) * 100",
            "hide": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "CPU usage  Double",
        "type": "timeseries"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 8
        },
        "id": 16,
        "panels": [],
        "title": "Memory Usage",
        "type": "row"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "do001-backend-noagent"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "blue",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "eo001-facade-noagent"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "orange",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 6,
          "x": 0,
          "y": 9
        },
        "id": 9,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "container_memory_working_set_bytes{namespace=\"quarkus-no-agent\", container!=\"\"}",
            "hide": false,
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "avg(irate(container_memory_usage_bytes{pod!=\"\",  namespace=~\"quarkus-no-agent\"}[5m]) * 100) by (pod)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (container_memory_working_set_bytes{image!=\"\",namespace=~\"quarkus-no-agent\"}) by (pod)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "Memory Quarkus No Agent",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "decimals": 0,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "do001-backend-otel"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "blue",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "eo001-facade-otel"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "orange",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 6,
          "x": 6,
          "y": 9
        },
        "id": 4,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "container_memory_usage_bytes{namespace=\"quarkus-otel\", container!=\"\"}",
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Memory Quarkus Opentelemetry",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "decimals": 0,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "do001-backend-appdyn"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "blue",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "eo001-facade-appdyn"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "orange",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 6,
          "x": 12,
          "y": 9
        },
        "id": 5,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "container_memory_usage_bytes{namespace=\"quarkus-appdyn\", container!=\"\"}",
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Memory Quarkus AppDyn",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "decimals": 0,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "do001-backend-double"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "blue",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "eo001-facade-double"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "orange",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 6,
          "x": 18,
          "y": 9
        },
        "id": 7,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "container_memory_usage_bytes{namespace=\"quarkus-double\", container!=\"\"}",
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Memory Quarkus Double",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "continuous-GrYlRd"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 0,
          "y": 17
        },
        "id": 20,
        "options": {
          "displayMode": "lcd",
          "minVizHeight": 10,
          "minVizWidth": 0,
          "orientation": "horizontal",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showUnfilled": true
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (container_memory_rss{container !=\"\",namespace=~\"quarkus-no-agent\"}) by ( pod)/ sum(container_spec_memory_limit_bytes{container !=\"\",namespace=~\"quarkus-no-agent\"}) by (pod) * 100",
            "hide": false,
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "avg(irate(container_memory_usage_bytes{pod!=\"\",  namespace=~\"quarkus-no-agent\"}[5m]) * 100) by (pod)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (container_memory_working_set_bytes{image!=\"\",namespace=~\"quarkus-no-agent\"}) by (pod)",
            "hide": true,
            "legendFormat": "__auto",
            "range": true,
            "refId": "C"
          }
        ],
        "title": "Percentage Memory Quarkus No Agent",
        "type": "bargauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "continuous-GrYlRd"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 6,
          "y": 17
        },
        "id": 21,
        "options": {
          "displayMode": "lcd",
          "minVizHeight": 10,
          "minVizWidth": 0,
          "orientation": "horizontal",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showUnfilled": true
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (container_memory_rss{container !=\"\",namespace=~\"quarkus-otel\"}) by ( pod)/ sum(container_spec_memory_limit_bytes{container !=\"\",namespace=~\"quarkus-otel\"}) by (pod) * 100",
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Percentage Memory Quarkus Opentelemetry",
        "type": "bargauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "continuous-GrYlRd"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 12,
          "y": 17
        },
        "id": 22,
        "options": {
          "displayMode": "lcd",
          "minVizHeight": 10,
          "minVizWidth": 0,
          "orientation": "horizontal",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showUnfilled": true
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (container_memory_rss{container !=\"\",namespace=~\"quarkus-appdyn\"}) by ( pod)/ sum(container_spec_memory_limit_bytes{container !=\"\",namespace=~\"quarkus-appdyn\"}) by (pod) * 100",
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Percentage Memory Quarkus AppDyn",
        "type": "bargauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "continuous-GrYlRd"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 18,
          "y": 17
        },
        "id": 19,
        "options": {
          "displayMode": "lcd",
          "minVizHeight": 10,
          "minVizWidth": 0,
          "orientation": "horizontal",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showUnfilled": true
        },
        "pluginVersion": "9.1.1",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "prometheus"
            },
            "editorMode": "code",
            "expr": "sum (container_memory_rss{container !=\"\",namespace=~\"quarkus-double\"}) by ( pod)/ sum(container_spec_memory_limit_bytes{container !=\"\",namespace=~\"quarkus-double\"}) by (pod) * 100",
            "interval": "",
            "legendFormat": "{{container}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Percentage Memory Quarkus Double",
        "type": "bargauge"
      }
    ],
    "refresh": false,
    "schemaVersion": 37,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": []
    },
    "time": {
      "from": "now-30m",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Benchmark2",
    "uid": "3G6JbjI4i",
    "version": 1,
    "weekStart": ""
    }